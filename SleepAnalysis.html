<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Healthy Consultation</title>
    <link rel="stylesheet" href="/RequestDisPatcher/CSS/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/RequestDisPatcher/CSS/layout.css">
    <link rel="stylesheet" type="text/css" href="/RequestDisPatcher/CSS/global.css">
    <link rel="stylesheet" type="text/css" href="/RequestDisPatcher/CSS/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/RequestDisPatcher/CSS/number-pb.css">

    <script src="/RequestDisPatcher/JS/jquery-3.2.0.min.js"></script>
    <script src="/RequestDisPatcher/JS/highcharts.js"></script>
    <script src="/RequestDisPatcher/JS/birthday.js"></script>
    <script src="/RequestDisPatcher/JS/radialIndicator.js"></script>
    <script src="/RequestDisPatcher/JS/jquery.velocity.min.js"></script>
    <script src="/RequestDisPatcher/JS/number-pb.js"></script>
    <script src="/RequestDisPatcher/JS/jquery.cookie.js"></script>
    <script src="/RequestDisPatcher/JS/DateFormat.js"></script>
    <style>
        #chartdiv ,#chartdiv1,#chartdiv2,#chartdiv3{
            width: 590px;
            height: 290px;
            border: 2px solid #ddd;
            border-radius: 12px;
            padding: 6px;
            margin-left: -9px;
        }
    </style>
</head>
<body>
<div class="holder rep " >
    <div class="left_nav">
        <div class="header_text">
            <div class="header_text_right">
                <span class="header_pic"><a href="modify.html" ><img src="Heads/default.jpg" id="head"></a></span>
            </div>
        </div>
        <ul>
            <a href="login.html"><li onclick="quit()"  >退出登录</li></a>
            <a href="real.html"><li>实时数据</li></a>
            <a href="healthy.html"><li class="on">健康档案</li></a>
            <a href="addProduct.html"><li>添加或更改设备</li></a>
            <a href="deleteProduct.html"><li>删除设备</li></a>
        </ul>
    </div>
    <div class="right_show analysis" >
        <h3>isleep</h3>
        <a href="homepage.html"><span class="glyphicon glyphicon-home"></span></a>
        <div class="show_detail">
            <div class="show_detail_data">
                <div class="data_table search">
                    <ul class="search_list reportslist">
                        <li>查询单次睡眠</li>
                        <li >查询多次睡眠</li>
                    </ul>
                    <div class="reports">
                        <div class="reports_detail">
                            <h4 class="">分析统计</h4>
                        </div>
                        <div class="statistics_table">
                            <p>心率</p>
                            <div class="statistics-table0">
                                <div id="chartdiv"></div>
                            </div>
                            <p>呼吸率</p>
                            <div class="statistics-table1">
                                <div id="chartdiv1"></div>
                            </div>
                            <p>深度睡眠时长</p>
                            <div class="statistics-table2">
                                <div id="chartdiv2"></div>
                            </div>
                            <p>睡眠质量曲线</p>
                            <div class="statistics-table3">
                                <div id="chartdiv3"></div>
                            </div>
                        </div>
                        <input type="button" onclick="javascript:history.back(-1);" value="Back" class="submit_submit back">
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>
<script>
    $(".right_show").css("border-bottom",'1px solid #ddd');
    $(".right_show").css("padding-bottom",30);

</script>
<script type="text/javascript">
    $(document).ready(function(){
        var userInfo = document.cookie.match(new RegExp("(^| )userData=([^;]*)(;|$)"));
        var info = JSON.parse(userInfo[2]);
        var Info=info['userInfo'];
        var first = Info.firstName;
        var middle = Info.middleName;
        var last = Info.lastName;
        var name;
        console.log(Info);
        if(middle==null||middle==""){
            name = first+" "+last;
        }else{
            name = first+" "+middle+" "+last;
        }
        $("#user_name").text(name);

        var gender = info.gender;

        var gender = Info.gender;

        var  image=Info.image;

        if(image==null){
            if(gender==1){

                $('#head').attr('src','Heads/header_man.png');

            }else if(gender==0){

                $('#head').attr('src','Heads/header_woman.png');

            }

        }else{
            $('#head').attr('src',image);
        }
    });
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
    function quit() {
        $.ajax({
            type:"post",
            url:"/RequestDisPatcher/request/dispatcher.do",
            data: {
                url:"http://127.0.0.1:9001/login/logout",
                params:"token="+token
            },
            success: function (data) {
                alert(data.Message);
//                        var txt=data.Message;
//                        window.wxc.xcConfirm(txt, window.wxc.xcConfirm.typeEnum.confirm);
//
            },
            error: function (data) {
                alert(data.Message);
            }
        });
    }
</script>
<script type="text/javascript">



    var otheremail=getQueryString('email');
    console.log(otheremail);

    // Get the CSV and create the chart
    var startTime=$.cookie('startTime')
    var endTime=$.cookie('endTime')
    console.log(startTime);
    console.log(endTime);
    var userInfo = document.cookie.match(new RegExp("(^| )userData=([^;]*)(;|$)"));
    //console.log(userInfo);
    var info = JSON.parse(userInfo[2]);
    console.log(info);
    var Info = info['userInfo'];
    var token = info.token;

    var startTimetoarray=startTime.split('/');

    var endTimetoarray=endTime.split('/');


    var tes1=new Array();

    function arrAverageNum2(arr){
        var sum = eval(arr.join("+"));
        return ~~(sum/arr.length*100)/100;
    }
    function indexOf(arr, item) {
        var i = 0;
        for(; i<arr.length;i++)
        {
            if(arr[i]===item)
                return i;
        }
        return -1;
    }
if(otheremail!=null){
    $.ajax({
        type:"post",
        dataType:"json",
        url:"/RequestDisPatcher/request/dispatcher.do",
        data: {
            url:"http://101.37.100.209:9002/device/getOtherData",
            params:"token="+token+"&startTime="+startTime+"&endTime="+endTime+"&email="+otheremail
        },
        success: function (data) {
            console.log(data.Data);



            $('.reports_detail').append('<p>监测日期：'+startTimetoarray[0]+'月'+startTimetoarray[1]+'日'+'-'+endTimetoarray[0]+'月'+endTimetoarray[1]+'日'+'</p> <p>共计次数：'+data.Data.length+'次<span><i>最高值</i><i>平均值</i><i>最低值</i></span></p>');

            var map = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map.push(data.Data[i].avgHeart);//一维数组
            }



            var hightest=Math.max.apply(null, map);//最大值
            var minest=Math.min.apply(null, map);//最小值
            var avg=Math.round(arrAverageNum2(map));
            var fields = {data:map,color:'#000',name:'心率',width:2};

            var b=indexOf(map,hightest);//最大值出现的位置

            var d=indexOf(map,minest);//最小值出现的位置

            var num=map.length-1; // 线段数是 点数-1
            var width=(num-b)*(563/num);
            var x=b*(563/num);
            var y=hightest;
            var x_min=d*(563/num);
            var y_min=minest;


            var map1 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map1.push(data.Data[i].avgBreath);//一维数组
            }
            var hightest1=Math.max.apply(null, map1).toFixed(0);//最大值
            var minest1=Math.min.apply(null, map1).toFixed(0);//最小值
            var avg1=arrAverageNum2(map1).toFixed(0);
            var fields1 = {data:map1,color:'#000',name:'呼吸率',width:2};


            var map2 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map2.push(Math.round((data.Data[i].deepSleepTime)/(60*60)));//一维数组
            }
            var hightest2=Math.max.apply(null, map2).toFixed(0);//最大值
            var minest2=Math.min.apply(null, map2).toFixed(0);//最小值
            var avg2=arrAverageNum2(map2).toFixed(0);
            var fields2 = {data:map2,color:'#000',name:'深度睡眠时长',width:2};


            var map3 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map3.push(data.Data[i].score);//一维数组
            }
            var hightest3=Math.max.apply(null, map3).toFixed(0);//最大值
            var minest3=Math.min.apply(null, map3).toFixed(0);//最小值
            var avg3=arrAverageNum2(map3).toFixed(0);
            var fields3 = {data:map3,color:'#000',name:'睡眠质量曲线',width:2};


            var map4 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map4.push((data.Data[i].lightSleepTime+data.Data[i].deepSleepTime)/(60*60));//一维数组
            }
            var hightest4=Math.max.apply(null, map4).toFixed(0);//最大值
            var minest4=Math.min.apply(null, map4).toFixed(0);//最小值
            var avg4=arrAverageNum2(map4).toFixed(0);

            var fields4 = {data:map4,color:'#6d4e31',name:'睡眠总时长',width:2};



            var chart = new Highcharts.Chart('chartdiv', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 40,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '心率',
//                    text: '呼吸率',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    gridLineWidth:'0px',
                    labels: {
                        enabled: false
                    }
                },
                yAxis: {
                    gridLineWidth:'0px',
                    plotLines:[
                        {
                            label:{
                                text:avg+'(平均值)',
//                                text:'平均值',  //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },
                            color:'#ddd',
                            dashStyle:'Dot',
                            value:avg,
                            width:2
                        }
                    ],
                    visible: false,
                    enabled: false,
                },
                plotLines:[
                    {
                        label:{
                            text:avg+'(平均值)',
//                                text:'平均值',  //标签的内容
                            align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                            x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                        },
                        color:'#ddd',
                        dashStyle:'Dot',
                        value:avg,
                        width:2
                    }
                ],
                legend: {
                    itemStyle: {

                        color: '#000000',
                        fontWeight: 'bold'
                    },
                    enabled: false,
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
//                    align: 'right',
                    verticalAlign: 'top',
                    x: 170,
                    y: 45,
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });

                chart.renderer.image('images/healthy_reports_highest.png', 525, hightest, 15, 15).add().

                renderer.text(Math.round(hightest), 545, y+12).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, y+30).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/healthy_reports_lowest.png', 525, 260-y_min, 15, 15).add().

                renderer.text(Math.round(minest), 545, 260-y_min).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, 280-y_min).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();


                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525, ((260-y_min)+hightest)/2, 15, 15).add().

                renderer.text(Math.round(avg), 545, ((260-y_min)+hightest)/2+7).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, 220-avg).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();



            });



            var chart = new Highcharts.Chart('chartdiv1', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 40,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '呼吸率',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    gridLineWidth:'0px',
                    labels: {
                        enabled: false
                    }
                },
                yAxis: {
                    visible: false,
                    enabled: false,
                },
                legend: {
                    itemStyle: {

                        color: '#000000',
                        fontWeight: 'bold'
                    },
                    enabled: false,
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
//                    align: 'right',
                    verticalAlign: 'top',
                    x: 170,
                    y: 45,
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields1
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest1,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });


//                var hightest1=Math.max.apply(null, map1).toFixed(0);//最大值
//                var minest1=Math.min.apply(null, map1).toFixed(0);//最小值
//                var avg1=arrAverageNum2(map1).toFixed(0);
//
                console.log(Math.round(hightest1)+50);

                chart.renderer.image('images/healthy_reports_highest.png', 530, Math.round(hightest1)+30, 15, 15).add().

                renderer.text(Math.round(hightest1), 545,Math.round(hightest1)+45).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, Math.round(hightest1)+60).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest1,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });

                chart.renderer.image('images/healthy_reports_lowest.png', 525, Math.round(minest1)+200, 15, 15).add().

                renderer.text(Math.round(minest1), 545,Math.round(minest1)+220).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, Math.round(minest1)+240).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();



                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg1,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525,((Math.round(minest1)+200)+(Math.round(hightest1)))/2, 15, 15).add().
                renderer.text(Math.round(avg1), 545, ((Math.round(minest1)+200)+(Math.round(hightest1)))/2+7).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, ((Math.round(minest1)+200)+(Math.round(hightest1)))/2+25).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();
            });


            var chart = new Highcharts.Chart('chartdiv2', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 60,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '深度睡眠时长',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    labels: {
                        enabled: false
                    }
                },

                yAxis: {
//                    visible: false,
//                    enabled: false,
                    labels: {
                        style: {
                            dashStyle:'Dot',     //
                            fontSize:'15px',
                            fontFamily:'华文细黑,STHeiti,MingLiu'
                        },
                        formatter:function(){
                            return ""+this.value+"h";
                        }
                    },

                    gridLineWidth:'0px',
                    title: {
                        text: ''
                    },
                },
                legend: {
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
                    align: 'right',
                    verticalAlign: 'top',
                    x: 30,
                    y: 45,
                    itemStyle: {
                        color: '#000000',
                        fontWeight: 'bold',

                    }
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields2,fields4
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest2,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/smile.png', 2,100 , 25, 25).add().renderer.image('images/ok.png', 2, 160, 25, 25).add().renderer.image('images/bad.png', 2, 220, 25, 25).add();

                console.log(Math.round(hightest2));
                chart.renderer.image('images/healthy_reports_highest.png', 525, Math.round(hightest2)+120, 15, 15).add().
                renderer.text(Math.round(hightest2), 545, Math.round(hightest2)+120).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('小时', 540, Math.round(hightest2)+120+17).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest2,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/healthy_reports_lowest.png', 525, 220-Math.round(minest2), 15, 15).add().

                renderer.text(Math.round(minest2), 545, 220-Math.round(minest2)).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('小时', 540, 220-Math.round(minest2)+15).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();


                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg2,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525,((220-Math.round(minest2))+Math.round(hightest2)+120)/2, 15, 15).add().

                renderer.text(Math.round(avg2), 545, ((220-Math.round(minest2))+Math.round(hightest2)+120)/2).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('小时', 540, ((220-Math.round(minest2))+Math.round(hightest2)+120)/2+15).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();
            });



            var chart = new Highcharts.Chart('chartdiv3', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 40,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '睡眠质量曲线',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    labels: {
                        enabled: false
                    }
                },
                yAxis: {
                    visible: false,
                    enabled: false,
                    style: {
                        dashStyle:'Dot',     //
                        fontSize:'15px',
                        fontFamily:'华文细黑,STHeiti,MingLiu'
                    },
                    gridLineWidth:'0px',
                    title: {
                        text: ''
                    },
                    plotLines:[
                        {
                            label:{
                                text:hightest3+'(最高值)',    //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },
                            zIndex:26,
                            color:'#ddd',           //线的颜色，定义为红色
                            dashStyle:'Dot',     //默认值，这里定义为实线
                            value:hightest3,         //定义在那个值上显示标示线，这里是在x轴上刻度为3的值处垂直化一条线
                            width:2                //标示线的宽度，2px
                        },
                        {
                            label:{
                                text:minest3+'(最低值)',   //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },
                            color:'#ddd',
                            dashStyle:'Dot',
                            value:minest3,
                            width:2,
                            zIndex:23
                        },
                        {

                            label:{
                                text:avg3+'(平均值)',  //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },

                            color:'#ddd',
                            dashStyle:'Dot',
                            value:avg3,
                            width:2
                        }
                    ]
                },

                legend: {
                    enabled: false,
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
                    align: 'left',
                    verticalAlign: 'top',
                    x: 30,
                    y: 45,
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields3
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest3,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });

                chart.renderer.image('images/healthy_reports_highest.png', 525, Math.round(hightest3)-20, 15, 15).add().

                renderer.text(Math.round(hightest3), 545, Math.round(hightest3)-5).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, Math.round(hightest3)+7).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest3,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/healthy_reports_lowest.png', 525, 300-Math.round(minest3), 15, 15).add().

                renderer.text(Math.round(minest3), 545, 300-Math.round(minest3)).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, 315-Math.round(minest3)).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();


                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg3,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525,(260-y_min+(Math.round(hightest3)))/2 , 15, 15).add().

                renderer.text(Math.round(avg3), 545, ((260-y_min)+(Math.round(hightest3)))/2+15).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, ((260-y_min)+(Math.round(hightest3)))/2+30).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

            });








        },
        error: function (data) {
            console.log(data);
        }
    });

}else{
    $.ajax({
        type:"post",
        dataType:"json",
        url:"/RequestDisPatcher/request/dispatcher.do",
        data: {
            url:"http://101.37.100.209:9002/device/getData",
            params:"token="+token+"&startTime="+startTime+"&endTime="+endTime
        },
        success: function (data) {
            console.log(data.Data);



            $('.reports_detail').append('<p>监测日期：'+startTimetoarray[0]+'月'+startTimetoarray[1]+'日'+'-'+endTimetoarray[0]+'月'+endTimetoarray[1]+'日'+'</p> <p>共计次数：'+data.Data.length+'次<span><i>最高值</i><i>平均值</i><i>最低值</i></span></p>');

            var map = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map.push(data.Data[i].avgHeart);//一维数组
            }



            var hightest=Math.max.apply(null, map);//最大值
            var minest=Math.min.apply(null, map);//最小值
            var avg=Math.round(arrAverageNum2(map));
            var fields = {data:map,color:'#000',name:'心率',width:2};

            var b=indexOf(map,hightest);//最大值出现的位置

            var d=indexOf(map,minest);//最小值出现的位置

            var num=map.length-1; // 线段数是 点数-1
            var width=(num-b)*(563/num);
            var x=b*(563/num);
            var y=hightest;
            var x_min=d*(563/num);
            var y_min=minest;


            var map1 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map1.push(data.Data[i].avgBreath);//一维数组
            }
            var hightest1=Math.max.apply(null, map1).toFixed(0);//最大值
            var minest1=Math.min.apply(null, map1).toFixed(0);//最小值
            var avg1=arrAverageNum2(map1).toFixed(0);
            var fields1 = {data:map1,color:'#000',name:'呼吸率',width:2};


            var map2 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map2.push(Math.round((data.Data[i].deepSleepTime)/(60*60)));//一维数组
            }
            var hightest2=Math.max.apply(null, map2).toFixed(0);//最大值
            var minest2=Math.min.apply(null, map2).toFixed(0);//最小值
            var avg2=arrAverageNum2(map2).toFixed(0);
            var fields2 = {data:map2,color:'#000',name:'深度睡眠时长',width:2};


            var map3 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map3.push(data.Data[i].score);//一维数组
            }
            var hightest3=Math.max.apply(null, map3).toFixed(0);//最大值
            var minest3=Math.min.apply(null, map3).toFixed(0);//最小值
            var avg3=arrAverageNum2(map3).toFixed(0);
            var fields3 = {data:map3,color:'#000',name:'睡眠质量曲线',width:2};


            var map4 = new Array();//一维数组
            for (var i = 0; i < data.Data.length; i++) {
                map4.push((data.Data[i].lightSleepTime+data.Data[i].deepSleepTime)/(60*60));//一维数组
            }
            var hightest4=Math.max.apply(null, map4).toFixed(0);//最大值
            var minest4=Math.min.apply(null, map4).toFixed(0);//最小值
            var avg4=arrAverageNum2(map4).toFixed(0);

            var fields4 = {data:map4,color:'#6d4e31',name:'睡眠总时长',width:2};



            var chart = new Highcharts.Chart('chartdiv', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 40,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '心率',
//                    text: '呼吸率',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    gridLineWidth:'0px',
                    labels: {
                        enabled: false
                    }
                },
                yAxis: {
                    gridLineWidth:'0px',
                    plotLines:[
                        {
                            label:{
                                text:avg+'(平均值)',
//                                text:'平均值',  //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },
                            color:'#ddd',
                            dashStyle:'Dot',
                            value:avg,
                            width:2
                        }
                    ],
                    visible: false,
                    enabled: false,
                },
                plotLines:[
                    {
                        label:{
                            text:avg+'(平均值)',
//                                text:'平均值',  //标签的内容
                            align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                            x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                        },
                        color:'#ddd',
                        dashStyle:'Dot',
                        value:avg,
                        width:2
                    }
                ],
                legend: {
                    itemStyle: {

                        color: '#000000',
                        fontWeight: 'bold'
                    },
                    enabled: false,
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
//                    align: 'right',
                    verticalAlign: 'top',
                    x: 170,
                    y: 45,
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });

                chart.renderer.image('images/healthy_reports_highest.png', 525, hightest, 15, 15).add().

                renderer.text(Math.round(hightest), 545, y+12).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, y+30).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/healthy_reports_lowest.png', 525, 260-y_min, 15, 15).add().

                renderer.text(Math.round(minest), 545, 260-y_min).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, 280-y_min).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();


                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525, ((260-y_min)+hightest)/2, 15, 15).add().

                renderer.text(Math.round(avg), 545, ((260-y_min)+hightest)/2+7).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, 220-avg).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();



            });



            var chart = new Highcharts.Chart('chartdiv1', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 40,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '呼吸率',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    gridLineWidth:'0px',
                    labels: {
                        enabled: false
                    }
                },
                yAxis: {
                    visible: false,
                    enabled: false,
                },
                legend: {
                    itemStyle: {

                        color: '#000000',
                        fontWeight: 'bold'
                    },
                    enabled: false,
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
//                    align: 'right',
                    verticalAlign: 'top',
                    x: 170,
                    y: 45,
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields1
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest1,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });


//                var hightest1=Math.max.apply(null, map1).toFixed(0);//最大值
//                var minest1=Math.min.apply(null, map1).toFixed(0);//最小值
//                var avg1=arrAverageNum2(map1).toFixed(0);
//
                console.log(Math.round(hightest1)+50);

                chart.renderer.image('images/healthy_reports_highest.png', 530, Math.round(hightest1)+30, 15, 15).add().

                renderer.text(Math.round(hightest1), 545,Math.round(hightest1)+45).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, Math.round(hightest1)+60).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest1,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });

                chart.renderer.image('images/healthy_reports_lowest.png', 525, Math.round(minest1)+200, 15, 15).add().

                renderer.text(Math.round(minest1), 545,Math.round(minest1)+220).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, Math.round(minest1)+240).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();



                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg1,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525,((Math.round(minest1)+200)+(Math.round(hightest1)))/2, 15, 15).add().
                renderer.text(Math.round(avg1), 545, ((Math.round(minest1)+200)+(Math.round(hightest1)))/2+7).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, ((Math.round(minest1)+200)+(Math.round(hightest1)))/2+25).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();
            });


            var chart = new Highcharts.Chart('chartdiv2', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 60,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '深度睡眠时长',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    labels: {
                        enabled: false
                    }
                },

                yAxis: {
//                    visible: false,
//                    enabled: false,
                    labels: {
                        style: {
                            dashStyle:'Dot',     //
                            fontSize:'15px',
                            fontFamily:'华文细黑,STHeiti,MingLiu'
                        },
                        formatter:function(){
                            return ""+this.value+"h";
                        }
                    },

                    gridLineWidth:'0px',
                    title: {
                        text: ''
                    },
                },
                legend: {
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
                    align: 'right',
                    verticalAlign: 'top',
                    x: 30,
                    y: 45,
                    itemStyle: {
                        color: '#000000',
                        fontWeight: 'bold',

                    }
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields2,fields4
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest2,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/smile.png', 2,100 , 25, 25).add().renderer.image('images/ok.png', 2, 160, 25, 25).add().renderer.image('images/bad.png', 2, 220, 25, 25).add();

                console.log(Math.round(hightest2));
                chart.renderer.image('images/healthy_reports_highest.png', 525, Math.round(hightest2)+120, 15, 15).add().
                renderer.text(Math.round(hightest2), 545, Math.round(hightest2)+120).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('小时', 540, Math.round(hightest2)+120+17).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest2,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/healthy_reports_lowest.png', 525, 220-Math.round(minest2), 15, 15).add().

                renderer.text(Math.round(minest2), 545, 220-Math.round(minest2)).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('小时', 540, 220-Math.round(minest2)+15).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();


                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg2,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525,((220-Math.round(minest2))+Math.round(hightest2)+120)/2, 15, 15).add().

                renderer.text(Math.round(avg2), 545, ((220-Math.round(minest2))+Math.round(hightest2)+120)/2).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('小时', 540, ((220-Math.round(minest2))+Math.round(hightest2)+120)/2+15).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();
            });



            var chart = new Highcharts.Chart('chartdiv3', {
                chart:{
                    type:'spline',
                    tooltip: {
                        enabled : false
                    },
                    marginRight: 50,
                    marginLeft: 40,
                },
                tooltip: {
                    enabled : false
                },
                title: {
                    text: '睡眠质量曲线',
                    x: -30,
                    y: 40
                },
                subtitle: {
                },
                xAxis: {
                    visible: false,
                    enabled: false,
                    labels: {
                        enabled: false
                    }
                },
                yAxis: {
                    visible: false,
                    enabled: false,
                    style: {
                        dashStyle:'Dot',     //
                        fontSize:'15px',
                        fontFamily:'华文细黑,STHeiti,MingLiu'
                    },
                    gridLineWidth:'0px',
                    title: {
                        text: ''
                    },
                    plotLines:[
                        {
                            label:{
                                text:hightest3+'(最高值)',    //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },
                            zIndex:26,
                            color:'#ddd',           //线的颜色，定义为红色
                            dashStyle:'Dot',     //默认值，这里定义为实线
                            value:hightest3,         //定义在那个值上显示标示线，这里是在x轴上刻度为3的值处垂直化一条线
                            width:2                //标示线的宽度，2px
                        },
                        {
                            label:{
                                text:minest3+'(最低值)',   //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },
                            color:'#ddd',
                            dashStyle:'Dot',
                            value:minest3,
                            width:2,
                            zIndex:23
                        },
                        {

                            label:{
                                text:avg3+'(平均值)',  //标签的内容
                                align:'right',                //标签的水平位置，水平居左,默认是水平居中center
                                x:10                         //标签相对于被定位的位置水平偏移的像素，重新定位，水平居左10px
                            },

                            color:'#ddd',
                            dashStyle:'Dot',
                            value:avg3,
                            width:2
                        }
                    ]
                },

                legend: {
                    enabled: false,
                    layout: 'vertical',
                    backgroundColor: '#fff',
                    floating: true,
                    align: 'left',
                    verticalAlign: 'top',
                    x: 30,
                    y: 45,
//                    labelFormat: '<span style="color:#a37c59">{name}</span>'
                },
                series:
                        [
                            fields3
                        ]
                ,
                credits:{
                    enabled:false // 禁用版权信息
                }
            }, function (chart) {
                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:hightest3,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });

                chart.renderer.image('images/healthy_reports_highest.png', 525, Math.round(hightest3)-20, 15, 15).add().

                renderer.text(Math.round(hightest3), 545, Math.round(hightest3)-5).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, Math.round(hightest3)+7).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:minest3,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,               //标示线的id，在删除该标示线的时候需要该id标示
                });
                chart.renderer.image('images/healthy_reports_lowest.png', 525, 300-Math.round(minest3), 15, 15).add().

                renderer.text(Math.round(minest3), 545, 300-Math.round(minest3)).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, 315-Math.round(minest3)).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();


                chart.yAxis[0].addPlotLine({           //在x轴上增加
                    value:avg3,                           //在值为2的地方
                    width:1,                           //标示线的宽度为2px
                    dashStyle:'Dot',
                    color: '#000',                  //标示线的颜色
                    id: 'plot-line-1', //标示线的id，在删除该标示线的时候需要该id标示
                    zIndex:3,
                });

                chart.renderer.image('images/healthy_reports_average.png', 525,(260-y_min+(Math.round(hightest3)))/2 , 15, 15).add().

                renderer.text(Math.round(avg3), 545, ((260-y_min)+(Math.round(hightest3)))/2+15).attr({}).
                css({
                    fontSize: '23px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add().
                renderer.text('次/分', 540, ((260-y_min)+(Math.round(hightest3)))/2+30).attr({
                }).
                css({
                    fontSize: '14px',
                    color: '#000',
                    fontFamily:'华文细黑',
                }).add();

            });








        },
        error: function (data) {
            console.log(data);
        }
    });


}
</script>
<script src="/RequestDisPatcher/JS/mine.js"></script>
</body>

